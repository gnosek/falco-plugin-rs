[package]
name = "falco_plugin_api"
version = "0.4.0"
edition = "2021"
license = "Apache-2.0"
description = "Autogenerated bindings for the Falco plugin API"
homepage = "https://falcosecurity.github.io/plugin-sdk-rs/falco_plugin_api/"
repository = "https://github.com/falcosecurity/plugin-sdk-rs"
readme = "README.md"
keywords = ["falco", "security"]
categories = ["external-ffi-bindings"]

[dependencies]

# cargo install cargo-commander
# cargo cmd regen_bindings
[package.metadata.commands.regen_bindings.command]
cmd = [
    "wget https://raw.githubusercontent.com/falcosecurity/libs/master/userspace/plugin/plugin_types.h -O plugin/plugin_types.h",
    "wget https://raw.githubusercontent.com/falcosecurity/libs/master/userspace/plugin/plugin_api.h -O plugin/plugin_api.h",
    """bindgen plugin/plugin_api.h \
        --new-type-alias ss_plugin_table_t --no-copy ss_plugin_table_t \
        --new-type-alias ss_plugin_table_entry_t --no-copy ss_plugin_table_entry_t \
        --new-type-alias ss_plugin_table_field_t --no-copy ss_plugin_table_field_t \
        --new-type-alias ss_plugin_owner_t --no-copy ss_plugin_owner_t \
        --new-type-alias ss_plugin_t --no-copy ss_plugin_t \
        --new-type-alias ss_instance_t --no-copy ss_instance_t \
        --new-type-alias ss_plugin_table_iterator_state_t --no-copy ss_plugin_table_iterator_state_t \
        --new-type-alias ss_plugin_routine_t --no-copy ss_plugin_routine_t \
        --new-type-alias ss_plugin_routine_state_t --no-copy ss_plugin_routine_state_t \
        --no-debug 'ss_plugin_table_info|ss_plugin_table_fieldinfo' \
        --override-abi '.*=C-unwind' \
        --blocklist-item imaxdiv_t \
        --blocklist-item imaxdiv \
        -- -I. > src/ffi.rs"""]
working_dir = "."
